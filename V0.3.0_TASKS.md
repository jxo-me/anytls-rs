# âœ… v0.3.0 ä»»åŠ¡æ£€æŸ¥æ¸…å•

**ç‰ˆæœ¬**: v0.3.0  
**ç›®æ ‡**: åŠŸèƒ½å®Œæ•´åº¦ 75% â†’ 90%  
**é¢„è®¡**: 9-14 å¤©

---

## ğŸ“Š è¿›åº¦æ€»è§ˆ

```
æ€»è¿›åº¦: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0/5 é˜¶æ®µå®Œæˆ (0%)
```

| é˜¶æ®µ | ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | çŠ¶æ€ |
|------|------|--------|--------|------|
| 1 | è¢«åŠ¨å¿ƒè·³å“åº” | P0 â­â­â­â­â­ | 1-2å¤© | â³ å¾…å¼€å§‹ |
| 2 | UDP over TCP | P0 â­â­â­â­â˜† | 3-4å¤© | â³ å¾…å¼€å§‹ |
| 3 | ä¼šè¯æ± é…ç½® | P0 â­â­â­â˜†â˜† | 2-3å¤© | â³ å¾…å¼€å§‹ |
| 4 | SYNACK è¶…æ—¶ | P1 â­â­â­â˜†â˜† | 1-2å¤© | â³ å¾…å¼€å§‹ |
| 5 | ç‰ˆæœ¬åå•† | P1 â­â­â­â˜†â˜† | 2-3å¤© | â³ å¾…å¼€å§‹ |

---

## ğŸ”µ é˜¶æ®µ 1: è¢«åŠ¨å¿ƒè·³å“åº” (1-2å¤©)

### å­ä»»åŠ¡

- [ ] 1.1 åœ¨ `session.rs` æ·»åŠ  HeartRequest å¤„ç† (2h)
- [ ] 1.2 åœ¨ `session.rs` æ·»åŠ  HeartResponse æ¥æ”¶ (1h)
- [ ] 1.3 æ·»åŠ å•å…ƒæµ‹è¯• (3h)
- [ ] 1.4 æ·»åŠ é›†æˆæµ‹è¯• `tests/heartbeat.rs` (3h)
- [ ] 1.5 ä¸ Go äº’æ“ä½œæµ‹è¯• (2h)
- [ ] 1.6 æ›´æ–°æ–‡æ¡£ (1h)

**æ€»è®¡**: 12h (1.5å¤©)

### å…³é”®ä»£ç 

**ä½ç½®**: `src/session/session.rs:handle_frame()`

```rust
Command::HeartRequest => {
    let response = Frame::control(Command::HeartResponse, frame.stream_id);
    self.write_control_frame(response).await?;
}

Command::HeartResponse => {
    tracing::debug!("[Session] Received HeartResponse");
    // TODO: v0.4.0 ç”¨äºä¸»åŠ¨æ£€æµ‹
}
```

### éªŒæ”¶

- [ ] âœ… æ”¶åˆ° HeartRequest èƒ½æ­£ç¡®å“åº”
- [ ] âœ… HeartResponse èƒ½æ­£ç¡®æ¥æ”¶
- [ ] âœ… æµ‹è¯•é€šè¿‡
- [ ] âœ… ä¸ Go äº’æ“ä½œ

---

## ğŸŸ¢ é˜¶æ®µ 2: UDP over TCP (3-4å¤©)

### å­ä»»åŠ¡

- [ ] 2.1 ç ”ç©¶ sing-box åè®® (4h)
- [ ] 2.2 åˆ›å»º `src/server/udp_proxy.rs` (8h)
  - [ ] UDP åŒ…ç¼–è§£ç 
  - [ ] UDP â†’ Stream è½¬å‘
  - [ ] Stream â†’ UDP è½¬å‘
  - [ ] åœ°å€æ ¼å¼å¤„ç†
- [ ] 2.3 é›†æˆåˆ° `handler.rs` (2h)
  - [ ] æ£€æµ‹ UDP ç›®æ ‡åœ°å€
  - [ ] è°ƒç”¨ UDP å¤„ç†é€»è¾‘
- [ ] 2.4 å®¢æˆ·ç«¯æ”¯æŒï¼ˆå¯é€‰ï¼‰(4h)
- [ ] 2.5 å•å…ƒæµ‹è¯• (4h)
- [ ] 2.6 é›†æˆæµ‹è¯• `tests/udp_over_tcp.rs` (4h)
- [ ] 2.7 ç«¯åˆ°ç«¯æµ‹è¯• (3h)
- [ ] 2.8 æ–‡æ¡£æ›´æ–° (1h)

**æ€»è®¡**: 30h (3.75å¤©)

### å…³é”®æ–‡ä»¶

1. **`src/server/udp_proxy.rs`** (æ–°å»º, ~300è¡Œ)
2. **`src/server/handler.rs`** (ä¿®æ”¹, +20è¡Œ)
3. **`src/server/mod.rs`** (ä¿®æ”¹, +1è¡Œ)
4. **`tests/udp_over_tcp.rs`** (æ–°å»º, ~200è¡Œ)

### éªŒæ”¶

- [ ] âœ… UDP åŒ…æ­£ç¡®ç¼–è§£ç 
- [ ] âœ… UDP æ•°æ®æ­£ç¡®è½¬å‘
- [ ] âœ… æ”¯æŒ IPv4/IPv6/Domain
- [ ] âœ… æµ‹è¯•é€šè¿‡
- [ ] âœ… ä¸ Go äº’æ“ä½œ

---

## ğŸŸ¡ é˜¶æ®µ 3: ä¼šè¯æ± é…ç½® (2-3å¤©)

### å­ä»»åŠ¡

- [ ] 3.1 æ·»åŠ  `SessionPoolConfig` ç»“æ„ (2h)
- [ ] 3.2 é‡æ„ `SessionPool` (6h)
  - [ ] Seq è·Ÿè¸ª
  - [ ] ç©ºé—²æ—¶é—´ç®¡ç†
  - [ ] æ¸…ç†ä»»åŠ¡
  - [ ] é…ç½®å‚æ•°
- [ ] 3.3 æ›´æ–° `Session` æ·»åŠ  seq (2h)
- [ ] 3.4 æ›´æ–° `Client` ä½¿ç”¨æ–°æ±  (2h)
- [ ] 3.5 æ·»åŠ å‘½ä»¤è¡Œå‚æ•° (1h)
- [ ] 3.6 å•å…ƒæµ‹è¯• (4h)
- [ ] 3.7 é›†æˆæµ‹è¯• `tests/session_pool.rs` (4h)
- [ ] 3.8 æ–‡æ¡£æ›´æ–° (1h)

**æ€»è®¡**: 22h (2.75å¤©)

### å…³é”®ä¿®æ”¹

1. **`src/client/session_pool.rs`** (é‡å†™, ~200è¡Œ)
2. **`src/session/session.rs`** (ä¿®æ”¹, +30è¡Œ)
3. **`src/client/client.rs`** (ä¿®æ”¹, +20è¡Œ)
4. **`src/bin/client.rs`** (ä¿®æ”¹, +15è¡Œ)

### æ–°å¢é…ç½®

```rust
--idle-check-interval 30    # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
--idle-timeout 60           # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
--min-idle-sessions 1       # æœ€å°ä¿ç•™æ•°
```

### éªŒæ”¶

- [ ] âœ… Seq æ­£ç¡®é€’å¢
- [ ] âœ… ä¼˜å…ˆä½¿ç”¨æœ€æ–°ä¼šè¯
- [ ] âœ… è‡ªåŠ¨æ¸…ç†è¿‡æœŸä¼šè¯
- [ ] âœ… é…ç½®å‚æ•°ç”Ÿæ•ˆ
- [ ] âœ… æµ‹è¯•é€šè¿‡

---

## ğŸŸ  é˜¶æ®µ 4: SYNACK è¶…æ—¶æ£€æµ‹ (1-2å¤©)

### å­ä»»åŠ¡

- [ ] 4.1 æ·»åŠ  SYNACK é€šçŸ¥æœºåˆ¶ (3h)
  - [ ] Stream æ·»åŠ  oneshot channel
  - [ ] Session å¤„ç† SYNACK æ—¶é€šçŸ¥
- [ ] 4.2 Client è¶…æ—¶ç­‰å¾… (2h)
- [ ] 4.3 é”™è¯¯ä¿¡æ¯å¤„ç† (2h)
- [ ] 4.4 æµ‹è¯• (3h)
- [ ] 4.5 æ–‡æ¡£ (1h)

**æ€»è®¡**: 11h (1.4å¤©)

### å…³é”®ä¿®æ”¹

1. **`src/session/stream.rs`** (ä¿®æ”¹, +20è¡Œ)
2. **`src/session/session.rs`** (ä¿®æ”¹, +15è¡Œ)
3. **`src/client/client.rs`** (ä¿®æ”¹, +30è¡Œ)
4. **`src/util/error.rs`** (æ·»åŠ  Timeout é”™è¯¯)

### éªŒæ”¶

- [ ] âœ… æ­£å¸¸è¿”å›å¿«é€Ÿ
- [ ] âœ… è¶…æ—¶èƒ½æ£€æµ‹
- [ ] âœ… é”™è¯¯æ­£ç¡®ä¼ é€’
- [ ] âœ… èµ„æºæ­£ç¡®é‡Šæ”¾

---

## ğŸ”´ é˜¶æ®µ 5: ç‰ˆæœ¬åå•† (2-3å¤©)

### å­ä»»åŠ¡

- [ ] 5.1 æ·»åŠ ç‰ˆæœ¬çŠ¶æ€å­—æ®µ (2h)
- [ ] 5.2 å®¢æˆ·ç«¯åå•†é€»è¾‘ (4h)
- [ ] 5.3 æœåŠ¡å™¨åå•†é€»è¾‘ (4h)
- [ ] 5.4 æ¡ä»¶ç‰¹æ€§å¯ç”¨ (3h)
- [ ] 5.5 å•å…ƒæµ‹è¯• (4h)
- [ ] 5.6 é›†æˆæµ‹è¯• `tests/version_negotiation.rs` (5h)
- [ ] 5.7 æ–‡æ¡£æ›´æ–° (2h)

**æ€»è®¡**: 24h (3å¤©)

### æµ‹è¯•åœºæ™¯

- [ ] v2 Client + v2 Server â†’ v2 æ¨¡å¼
- [ ] v2 Client + v1 Server â†’ v1 æ¨¡å¼
- [ ] v1 Client + v2 Server â†’ v1 æ¨¡å¼
- [ ] ç‰¹æ€§æ­£ç¡®å¯ç”¨/ç¦ç”¨

### éªŒæ”¶

- [ ] âœ… ç‰ˆæœ¬æ­£ç¡®åå•†
- [ ] âœ… ç‰¹æ€§æ¡ä»¶å¯ç”¨
- [ ] âœ… å‘åå…¼å®¹
- [ ] âœ… ä¸ Go äº’æ“ä½œ

---

## ğŸŸ£ é˜¶æ®µ 6: æ–‡æ¡£å’Œæµ‹è¯• (1-2å¤©)

### æ–‡æ¡£æ›´æ–°

- [ ] `README.md` - åŠŸèƒ½åˆ—è¡¨ã€v0.3.0 ç‰¹æ€§
- [ ] `CHANGELOG.md` - v0.3.0 å˜æ›´è®°å½•
- [ ] `ARCHITECTURE.md` - æ–°å¢æ¨¡å—è¯´æ˜
- [ ] `FEATURE_COMPARISON.md` - æ›´æ–°å¯¹æ¯”è¡¨
- [ ] `FEATURE_GAP_SUMMARY.md` - æ›´æ–°å®Œæˆåº¦

### æµ‹è¯•å®Œå–„

- [ ] ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] å‹åŠ›æµ‹è¯•
- [ ] å…¼å®¹æ€§æµ‹è¯•çŸ©é˜µ

---

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å¼€å‘

```bash
# ç¼–è¯‘æ£€æŸ¥
cargo check

# è¿è¡Œæµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test heartbeat
cargo test udp
cargo test session_pool

# Clippy
cargo clippy -- -D warnings

# æ ¼å¼åŒ–
cargo fmt
```

### æµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
cargo test --lib

# é›†æˆæµ‹è¯•
cargo test --test '*'

# å®Œæ•´æµ‹è¯•
.\run_comprehensive_tests.ps1
```

### æ–‡æ¡£

```bash
# ç”Ÿæˆæ–‡æ¡£
cargo doc --no-deps --open

# æ£€æŸ¥æ–‡æ¡£
cargo rustdoc --lib -- -D missing_docs
```

---

## æ¯æ—¥æ£€æŸ¥æ¸…å•

### æ¯å¤©å¼€å§‹

- [ ] æŸ¥çœ‹å½“å‰é˜¶æ®µä»»åŠ¡
- [ ] æ›´æ–°ä»»åŠ¡çŠ¶æ€
- [ ] è®¾ç½®ä»Šæ—¥ç›®æ ‡

### æ¯å¤©ç»“æŸ

- [ ] æäº¤ä»£ç 
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] è®°å½•é—®é¢˜
- [ ] è®¡åˆ’æ˜å¤©ä»»åŠ¡

### æ¯å‘¨æ£€æŸ¥

- [ ] å›é¡¾è¿›åº¦
- [ ] è°ƒæ•´è®¡åˆ’
- [ ] é£é™©è¯„ä¼°
- [ ] æµ‹è¯•è¦†ç›–

---

**å¼€å§‹æ—¥æœŸ**: 2025-11-03  
**ç›®æ ‡æ—¥æœŸ**: 2025-11-17  
**å½“å‰çŠ¶æ€**: â³ å¾…å¼€å§‹

---

âœ… **å‡†å¤‡å°±ç»ªï¼Œéšæ—¶å¯ä»¥å¼€å§‹ï¼**

