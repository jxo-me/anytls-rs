# AnyTLS-RS

AnyTLS protocol implementation in Rust.

## é¡¹ç›®çŠ¶æ€

ğŸš§ **æ­£åœ¨å¼€å‘ä¸­** - ç¬¬1å‘¨ï¼šåŸºç¡€è®¾æ–½æ­å»º

### å·²å®Œæˆ âœ…

- [x] é¡¹ç›®åˆå§‹åŒ– (Cargo.toml, åŸºç¡€ç»“æ„)
- [x] Frame ç¼–è§£ç å™¨å®ç° (`protocol/frame.rs`, `protocol/codec.rs`)
- [x] å·¥å…·æ¨¡å— (`util/string_map.rs`, `util/error.rs`)
- [x] Padding ç®—æ³•åŸºç¡€ (`padding/factory.rs`)
- [x] åŸºç¡€æµ‹è¯•æ¡†æ¶

### è¿›è¡Œä¸­ ğŸš§

- [ ] TLS é›†æˆ (rustls)
- [ ] Session å®ç°
- [ ] Stream å®ç°

### å¾…å®ç° ğŸ“‹

- [ ] å®¢æˆ·ç«¯å®ç°
- [ ] æœåŠ¡å™¨å®ç°
- [ ] Socks5/HTTP ä»£ç†
- [ ] UDP over TCP
- [ ] ä¼šè¯å¤ç”¨æ± 
- [ ] å®Œæ•´æµ‹è¯•è¦†ç›–

## é¡¹ç›®ç»“æ„

```
anytls-rs/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs              # åº“å…¥å£
â”‚   â”œâ”€â”€ protocol/           # åè®®å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ frame.rs        # Frame å®šä¹‰
â”‚   â”‚   â””â”€â”€ codec.rs        # ç¼–è§£ç å™¨
â”‚   â”œâ”€â”€ session/            # ä¼šè¯å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ session.rs      # Session å®ç° (å¾…å®ç°)
â”‚   â”‚   â””â”€â”€ stream.rs       # Stream å®ç° (å¾…å®ç°)
â”‚   â”œâ”€â”€ padding/            # å¡«å……ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ factory.rs      # Padding ç­–ç•¥å·¥å‚
â”‚   â”œâ”€â”€ util/               # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ string_map.rs   # StringMap å®ç°
â”‚   â”‚   â””â”€â”€ error.rs        # é”™è¯¯ç±»å‹
â”‚   â”œâ”€â”€ client/             # å®¢æˆ·ç«¯ (å¾…å®ç°)
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ server/             # æœåŠ¡å™¨ (å¾…å®ç°)
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â””â”€â”€ bin/                # å¯æ‰§è¡Œæ–‡ä»¶
â”‚       â”œâ”€â”€ client.rs
â”‚       â””â”€â”€ server.rs
```

## å¿«é€Ÿå¼€å§‹

### æ„å»ºé¡¹ç›®

```bash
cargo build
```

### è¿è¡Œæµ‹è¯•

```bash
cargo test
```

### è¿è¡Œå®¢æˆ·ç«¯ (å¾…å®ç°)

```bash
cargo run --bin anytls-client
```

### è¿è¡ŒæœåŠ¡å™¨ (å¾…å®ç°)

```bash
cargo run --bin anytls-server
```

## ä¾èµ–

ä¸»è¦ä¾èµ–ï¼š

- **tokio**: å¼‚æ­¥è¿è¡Œæ—¶
- **rustls**: TLS å®ç°
- **tokio-rustls**: å¼‚æ­¥ TLS ç»‘å®š
- **bytes**: é«˜æ•ˆå­—èŠ‚ç¼“å†²åŒº
- **tokio-util**: Tokio å·¥å…· (ç¼–è§£ç å™¨ç­‰)
- **md5**: MD5 å“ˆå¸Œ
- **sha2**: SHA2 å“ˆå¸Œ
- **tracing**: ç»“æ„åŒ–æ—¥å¿—

## å¼€å‘è·¯çº¿å›¾

### ç¬¬1å‘¨: åŸºç¡€è®¾æ–½ âœ…
- [x] é¡¹ç›®åˆå§‹åŒ–
- [x] Frame ç¼–è§£ç å™¨
- [ ] TLS é›†æˆ
- [x] åŸºç¡€æµ‹è¯•æ¡†æ¶

### ç¬¬2å‘¨: æ ¸å¿ƒåè®® (è¿›è¡Œä¸­)
- [ ] Session æ¡†æ¶
- [ ] Stream å®ç°
- [ ] è®¤è¯æœºåˆ¶
- [ ] å•å…ƒæµ‹è¯•

### ç¬¬3å‘¨: ä»£ç†åŠŸèƒ½
- [ ] TCP ä»£ç†è½¬å‘
- [ ] Socks5 å®¢æˆ·ç«¯
- [ ] HTTP ä»£ç†
- [ ] UDP over TCP

### ç¬¬4å‘¨: é«˜çº§ç‰¹æ€§
- [ ] ä¼šè¯å¤ç”¨æ± 
- [ ] Padding ç®—æ³•é›†æˆ
- [ ] ç‰ˆæœ¬åå•†
- [ ] é”™è¯¯å¤„ç†å®Œå–„

### ç¬¬5å‘¨: ä¼˜åŒ–ä¸æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å†…å­˜ä¼˜åŒ–
- [ ] åŸºå‡†æµ‹è¯•
- [ ] åè®®å…¼å®¹æ€§æµ‹è¯•

## åè®®å…¼å®¹æ€§

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ª [AnyTLS åè®®è§„èŒƒ](../docs/protocol.md)ï¼Œç¡®ä¿ä¸ Go å‚è€ƒå®ç°çš„å®Œå…¨å…¼å®¹ã€‚

## æ€§èƒ½ç›®æ ‡

åŸºäºå¯è¡Œæ€§åˆ†æï¼Œé¢„æœŸæ€§èƒ½æå‡ï¼š

- **ååé‡**: +30-60%
- **å»¶è¿Ÿ (P99)**: -30-40%
- **å†…å­˜å ç”¨**: -40-60%
- **é«˜å¹¶å‘åœºæ™¯**: +40-60% æ€§èƒ½æå‡

## è®¸å¯è¯

MIT License

## å‚è€ƒ

- [AnyTLS Go å®ç°](../)
- [åè®®æ–‡æ¡£](../docs/protocol.md)
- [Rust é‡å†™å¯è¡Œæ€§åˆ†æ](../RUST_REWRITE_ANALYSIS.md)

